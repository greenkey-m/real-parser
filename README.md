# opencart-3 real connector
Загрузка из электрозона, ИТП
Парсинг данных о товарах - электрозон, ситилинк, я.маркет, никс, мерлион

License: GPLv3

TODO:
+ Подгрузка файла config.php (данные базы)
+ Загрузка параметра наценки из базы, и таблицы с наценками (если есть)
+ Создает лог temp, для записи событий
+ Удаление категорий которые пропали из базы, и товары тоже
+ Характеристики - подгрузка с сайта
+ Цена округление до 10 – свыше 1000
+ контроль за потерей доступа к файлу (проверка его обновления - если меньше суток, не копировать)
+ загрузка в базу блоками по 1000 единиц, переподключение в БД, паузы
- контроль за потерей доступа к БД - запускать заново, или переподключаться, загрузка блоками, фиксировать в логе
- сделать чекинг таблиц БД по товара на предмет ошибок
- если каких-то записей в БД не хватает, дополнить (исправить)
- чистка (проверка) картинок, удаление неиспольземых
Парсит разделы:
+ сравнить разделы, которые есть в БД с теми, которые в файле, если есть удаленные – записать в лог
+ удаляет исключенные
+ если раздел есть обновить
+ если раздела нет - создать
+ Картинка, если есть в базе, сохранить
Парсит товары:
+ сравнивает товары – если какие-то удалены, записывает в лог
+ удаляет исключенные
+ если товар есть – обновить
+ если товара нет – создать
+ сохранять seo категории
+ сохранять сео товара
+ при создании (обновлении) товара: создавать его параметры, 
+ загружать спецификацию с его страницы, 
+ загружать картинки с его страницы.
+ записывать вендора/производителя товара
+ наценка определяется из таблицы (если есть), если нет – ставится из параметра по дефолту

TODO
- сохранение всех картинок
- удаление тех товаров и картинок, которые пропали из загрузки
- сделать модификатор для изменения модели product для подгрузки из ИТП
- сделать селектор, который выбирает, откуда подгружать - ИТП или электрозон
- поставщик товара – в местоположении ? 
+ ленивая загрузка данных из ИТП
- переименовать все, парсер-загрузчик, а парсинг - с мерлиона и тд
включить параметр - silent load, длф загрузчика по крон, между 10тыс товаров - пауза?
- подгрузка изображения и остальное что есть из ИТП
- парсер с мерлиона
- парсер с ситилинка
- парсер с Никса
- парсер с я.директа
- переименовать весь проект и неймспейсы в коннектор (парсинг - компонент)
+ создать файл - коннектор для айтипи
+ очистить каталог товаров и категорий
+ создать тестовую загрузку данных (ограничиться 100 позиций)
+ разобраться в категориях айтипи
- переименовать компонент (сделать форк), назвать его realconnect 

Настройка коннектора в админке:
- проверка наличия таблицы в базе, если нет – создать (наценка)
- сделать в настройках форму внесения наценок на категории
- чтение файлов лога 2018-12-06_12-34, чтение текущей даты/времени (в модуль)
- запуск загрузчика из админки
- создать группы категорий, для которых можно задавать наценку
- наценку проработать по категориям – параметры компонента (расширенная форма)
- Сделать кнопку – reset, которая очищает таблицы и все файлы
- настраиваемые параметры парсера (посмотреть в его коде TODO)
- параметры парсера – в настройках, что делать с исключенными товарами (автоудаление?)
- разобраться с кавычками в поиске модуля товара (избранные), возможно подменять их?


Шаблонизатор
v-bind or : - привязка к переменным
v-if условия (видимости) <span v-if="seen">
v-for - циклы <li v-for="todo in todos"> {{ todo.text }}
v-on or @click - события
v-model - для форм связывание
v-html - подставляет данные вместо {{}} <span v-html="rawHtml"></span>

